<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta http-equiv="Content-Security-Policy" content="default-src *;
    img-src * 'self' data: https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' *;
    style-src  'self' 'unsafe-inline' *">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href=" https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet"
        href="/mcapp/css/salesforce-lightning-design-system/assets/styles/salesforce-lightning-design-system.min.css">
    <link rel="stylesheet" href="/mcapp/css/styles.css">
    <script type="text/javascript" src="/mcapp/js/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twbs-pagination/1.4.2/jquery.twbsPagination.min.js"></script>
    <script type="text/javascript" src="/mcapp/js/htmlemailsDashborad.js"></script>
    <style>
        #assignLinks {
            background-color: white;
        }
        #content {
            float: left;
            width: 320px;
            background-color: white;
        }
        #sidebar {
            float: right;
            width: 320px;
            background-color: white;
        }
        #cleared {
            clear: both;
        }
    </style>
</head>

<body>
    <div>
        <img src="https://image.sflink.afsdktests.com/lib/fe3d15707564067f721270/m/1/bae131a1-9bc9-477b-9f91-422f3d7d712f.png" alt="">
    </div>
    <div class="slds-tabs_default">
        <ul class="slds-tabs_default__nav" role="tablist">
            <li class="slds-tabs_default__item" title="Item One" role="presentation">
                <a id="DashboardLink"class="slds-tabs_default__link" href="/Dashboard/home" role="tab" tabindex="0"
                    aria-selected="true" aria-controls="tab-default-1" id="tab-default-1__item">Dashboard</a>
            </li>
            <li class="slds-tabs_default__item slds-is-active" title="Item One" role="presentation">
                <a id="htmlemailsLink" class="slds-tabs_default__link" href="/htmlemails/home?rt=$('#rt').val()" role="tab" tabindex="0"
                    aria-selected="true" aria-controls="tab-default-1" id="tab-default-1__item">Emails</a>
            </li>
        </ul>
        <div id="tab-default-1" class="slds-tabs_default__content slds-show" role="tabpanel"
            aria-labelledby="tab-default-1__item">
            <article class="slds-card">
                <div class="slds-card__header slds-grid">
                    <header class="slds-media slds-media_center slds-has-flexi-truncate">
                        <div class="slds-media__figure">
                            <div class="slds-form-element">
                                <div class="slds-form-element__control">
                                    <div class="slds-combobox_container">
                                        <div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click"
                                            aria-expanded="false" aria-haspopup="listbox" role="combobox">
                                            <div class="slds-form-element slds-p-top--medium slds-p-horizontal--medium slds-m-bottom--small">
                                                <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_right">
                                                    <input id="lookup" onkeyup="filter()" class="slds-input" type="text"
                                                        aria-haspopup="true" aria-autocomplete="listbox" role="combobox"
                                                        aria-activedescendant="" />                                                          
                                                    <button class="slds-button slds-button_icon slds-input__icon slds-input__icon_right" onclick="loadHtmlEmails(false, 'filtered', 1)" title="Search">
                                                        <svg class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default"
                                                            aria-hidden="true">
                                                            <use xlink:href="/mcapp/images/symbols.svg#search">
                                                            </use>
                                                        </svg>
                                                    </button>
                                                </div>
                                            </div>                                          
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="slds-media__body">

                        </div>   
                        <div class="slds-no-flex">
                          <button id="btn-assign" class="slds-button slds-button_brand" onclick="openAssignLinks()">Assign OneLink link</button>
                      </div>                    
                    </header>
                </div>
                <div class="slds-card__body">
                    <div class="slds-col slds-size_3-of-3">
                        <div id="dashboard-table"></div>
                        <ul id="pagination-demo" class="pagination-sm" style="justify-content: center;"></ul>
                    </div>
                </div>
            </article>
        </div>
    </div>
    <section id="section-assignLinks"  role="dialog" tabindex="-1" aria-labelledby="assignLinks" aria-modal="true" aria-describedby="assignLinks" class="slds-modal">
        <div class="slds-modal__container" style="overflow-y: scroll; width:60% !important;">
           <div id="assignLinks">
              <header class="slds-modal__header" style="background-color: #f3f2f2; text-align:left">
                <span><b>Email name: </b></span>TestEmail-OneLink<br>
                <span><b>Subjectline: </b>Testing OneLink</span><br>
                <span><b>Preheader: </b>preheader</span>
            </header>
            <div id="content">
              <label class="slds-form-element__label" for="select-01" style="padding-left: 1rem;padding-top: 1rem;">Select Links from the Email</label>
              <article>
                <div class="slds-card__header slds-grid">
                  <header class="slds-media slds-media_center slds-has-flexi-truncate">
                    <div class="slds-media__body">
                      <h2 class="slds-card__header-title">
                        <a href="javascript:void(0);" class="slds-card__header-link slds-truncate" title="Card Header">
                          <span><b>Unsubscribe</b></span><br>
                          <span style="font-size: 12px;font-weight: normal;">www.preferencecentre.com</span><br>
                        </a>
                      </h2>
                    </div>
                    <div class="slds-no-flex">
                      <div class="slds-checkbox">
                        <input type="checkbox" name="options" id="checkbox-unique-id-499" value="checkbox-unique-id-499" checked="" />
                        <label class="slds-checkbox__label" for="checkbox-unique-id-499">
                          <span class="slds-checkbox_faux"></span>
                        </label>
                      </div>
                    </div>
                  </header>
                </div>
                <div class="slds-card__body"></div>
                <footer class="slds-card__footer"></footer>
              </article>
              <div style="border-top:2px solid lightgray;margin: 0px 40px 0px 40px;">
              </div>
              <article>
                <div class="slds-card__header slds-grid">
                  <header class="slds-media slds-media_center slds-has-flexi-truncate">
                    <div class="slds-media__body">
                      <h2 class="slds-card__header-title">
                        <a href="javascript:void(0);" class="slds-card__header-link slds-truncate" title="Card Header">
                          <span><b>Facebook</b></span><br>
                          <span style="font-size: 12px;font-weight: normal;">www.facebook.com</span><br>
                        </a>
                      </h2>
                    </div>
                    <div class="slds-no-flex">
                      <div class="slds-checkbox">
                        <input type="checkbox" name="options" id="checkbox-unique-id-499" value="checkbox-unique-id-499" checked="" />
                        <label class="slds-checkbox__label" for="checkbox-unique-id-499">
                          <span class="slds-checkbox_faux"></span>
                        </label>
                      </div>
                    </div>
                  </header>
                </div>
                <div class="slds-card__body"></div>
                <footer class="slds-card__footer"></footer>
              </article>
            </div>
            <div id="sidebar">
              <label class="slds-form-element__label" for="select-01" style="padding-top: 1rem;">Select OneLink Link</label>
              <article>
                <div class="slds-card__header slds-grid" style="width: 100%; padding-left:0px !important;">
                  <header class="slds-media slds-media_center" style="width: 100%;">
                    <div class="slds-select_container" style="width: 100%;">
                      <select class="slds-select" id="selectonelink">
                        <option value="">Please select</option>
                      </select>
                    </div>
                  </header>
                </div>
                <div class="slds-card__body"></div>
                <footer class="slds-card__footer"></footer>
              </article>
            </div>
            <div id="cleared"></div>
          </div>
           <footer class="slds-modal__footer">
              <button class="slds-button slds-button_neutral" onclick="cancelUpdates()">Cancel</button>
              <button class="slds-button slds-button_brand" onclick="confirmationAlert()">Save</button>
           </footer>
        </div>
     </section>
     <div id="background-modals" class="slds-backdrop"></div>
     <section id="section-confirmationAlert" role="dialog" tabindex="-1" aria-label="Meaningful description of the modal content" aria-modal="true" aria-describedby="confirmationAlert" class="slds-modal">
      <div class="slds-modal__container">
        <header class="slds-modal__header">
          <h2 id="confirmationAlert-heading" class="slds-modal__title slds-hyphenate">Confirm</h2>
        </header>
        <div class="slds-modal__content slds-p-around_medium" id="confirmationAlert">
          <p>You are about to update 2 links. Are you sure? </p>
        </div>
        <footer class="slds-modal__footer">
          <button class="slds-button slds-button_neutral" onclick="cancelUpdates()">Cancel</button>
          <button class="slds-button slds-button_brand" onclick="confirmLinkUpdates()">Confirm</button>
        </footer>
      </div>
    </section>
    <input type="hidden" id="rt" name="rt" value="">
    <input type="hidden" id="eid" name="eid" value="">
    <input type="hidden" id="currentDashboard" name="currentDashboard" value="">
    <script>
        function filter() {
            inp = $('#lookup').val();
            if(inp == '') {
                loadHtmlEmails(false, 'filtered', 1);
            }
        }

        function openAssignLinks(){ 
          let emails = [];
          $("input:checkbox[name=emailstoassign]:checked").each(function(){
            emails.push($(this).val());
          });

          if(emails.length > 0){
            $("#section-assignLinks").addClass("slds-fade-in-open");
            $("#background-modals").addClass("slds-backdrop_open");
            loadEmailinModal(emails);
            getLinks();
          }
          else {
            alert("You have to select one email at least.");
          }

        }
        function confirmationAlert(){
          $("#section-assignLinks").removeClass("slds-fade-in-open");
          $("#section-confirmationAlert").addClass("slds-fade-in-open");
        }
    
        function confirmLinkUpdates() {
          $("#section-confirmationAlert").removeClass("slds-fade-in-open");
          $("#background-modals").removeClass("slds-backdrop_open");
        }
    
        function cancelUpdates(){
          $("#section-assignLinks").removeClass("slds-fade-in-open");
          $("#section-confirmationAlert").removeClass("slds-fade-in-open");
          $("#background-modals").removeClass("slds-backdrop_open");
        }
    </script>
</body>
</html>